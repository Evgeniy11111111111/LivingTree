"use strict";

// Бургер меню
var menu = document.querySelector(".header__menu");
var linksHeader = document.querySelectorAll(".js-header-link");
document.querySelector(".burger--open").addEventListener("click", function () {
  document.body.classList.add("lock");
  menu.classList.add("is-active");
});
document.querySelector(".burger--close").addEventListener('click', function () {
  document.body.classList.remove("lock");
  menu.classList.remove("is-active");
});
linksHeader.forEach(function (link) {
  link.addEventListener("click", function () {
    if (window.innerWidth < 1000) {
      document.body.classList.remove("lock");
      menu.classList.remove("is-active");
    }
  });
}); // Каталог свайпер

var catalogMain = document.querySelectorAll(".catalog__main");
var catalogSwiper = document.querySelectorAll(".catalog__swiper");

function addSwiper() {
  if (window.innerWidth < 640) {
    catalogMain.forEach(function (elem) {
      elem.classList.add("swiper-wrapper");
      elem.classList.remove("catalog__main");
    });
    document.querySelectorAll(".catalog__card").forEach(function (elem) {
      elem.classList.add("swiper-slide");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.add("swiper");
      var swiper = new Swiper(".catalog__swiper", {
        slidesPerView: "auto",
        spaceBetween: 10
      });
    });
  } else {
    catalogMain.forEach(function (elem) {
      elem.classList.remove("swiper-wrapper");
      elem.classList.add("catalog__main");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.remove("swiper");
    });
  }
}

addSwiper();
window.addEventListener('resize', function () {
  addSwiper();
}); // Каталог сортировка

var btnSelect = document.querySelector(".catalog__sort-select-head");
var select = document.querySelector(".catalog__sort-select");
btnSelect.addEventListener('click', function () {
  select.classList.toggle('is-active');
});
var list = document.querySelectorAll(".catalog__sort-select-body-item");
list.forEach(function (elem) {
  elem.addEventListener('click', function () {
    list.forEach(function (el) {
      return el.classList.remove('is-active');
    });
    elem.classList.add('is-active');
    select.classList.remove('is-active');
    btnSelect.querySelector('.catalog__sort-select-head-text').textContent = elem.textContent;
    activeCatalog();
  });
});
document.addEventListener('click', function (e) {
  if (!e.composedPath().includes(select)) {
    select.classList.remove('is-active');
  }
});

function activeCatalog() {
  list.forEach(function (elem) {
    if (elem.classList.contains('is-active')) {
      var id = elem.dataset.sort;
      console.log(id);
      var mainCatalog = document.querySelectorAll('.catalog__swiper');
      mainCatalog.forEach(function (el) {
        el.classList.remove("is-active");

        if (id === el.dataset.path) {
          el.classList.add("is-active");
        }
      });
    }
  });
}

activeCatalog(); // Приемущества тултип
//
// const advantgesItems = document.querySelectorAll(".advantage__item");
// const advantgesItemsBox = document.querySelectorAll(".advantage__img-box")
//
// advantgesItems.forEach(item => {
//     item.addEventListener('mouseenter', () => {
//         advantgesItemsBox.forEach(elem => {
//             elem.classList.remove("is-show")
//         })
//         advantgesItemsBox.forEach(elem => {
//             if (elem.dataset.img === item.dataset.pathimg) {
//                 console.log(elem)
//                 elem.classList.add("is-show")
//             }
//         })
//     })
//
//     item.addEventListener('mouseleave', () => {
//         advantgesItemsBox.forEach(elem => {
//             elem.classList.remove("is-show")
//         })
//     })
//
// })
// Дилеры аккардион

function activeAccardion(item) {
  item.parentElement.classList.add("is-show");
  var panel = item.nextElementSibling;

  if (!panel.style.maxHeight) {
    panel.style.maxHeight = panel.scrollHeight + "px";
  }
}

function notActiveAccardion(item) {
  item.parentElement.classList.remove("is-show");
  var panel = item.nextElementSibling;

  if (panel.style.maxHeight) {
    panel.style.maxHeight = null;
  }
}

var accardions = document.querySelectorAll('.dealers__head');
accardions.forEach(function (elem) {
  elem.addEventListener('click', function () {
    elem.parentElement.classList.contains("is-show") ? notActiveAccardion(elem) : activeAccardion(elem);
    accardions.forEach(function (el) {
      if (el.parentElement !== elem.parentElement) notActiveAccardion(el);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImxpbmtzSGVhZGVyIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZm9yRWFjaCIsImxpbmsiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiY2F0YWxvZ01haW4iLCJjYXRhbG9nU3dpcGVyIiwiYWRkU3dpcGVyIiwiZWxlbSIsInN3aXBlciIsIlN3aXBlciIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJidG5TZWxlY3QiLCJzZWxlY3QiLCJ0b2dnbGUiLCJsaXN0IiwiZWwiLCJ0ZXh0Q29udGVudCIsImFjdGl2ZUNhdGFsb2ciLCJlIiwiY29tcG9zZWRQYXRoIiwiaW5jbHVkZXMiLCJjb250YWlucyIsImlkIiwiZGF0YXNldCIsInNvcnQiLCJjb25zb2xlIiwibG9nIiwibWFpbkNhdGFsb2ciLCJwYXRoIiwiYWN0aXZlQWNjYXJkaW9uIiwiaXRlbSIsInBhcmVudEVsZW1lbnQiLCJwYW5lbCIsIm5leHRFbGVtZW50U2libGluZyIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0Iiwibm90QWN0aXZlQWNjYXJkaW9uIiwiYWNjYXJkaW9ucyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBLElBQU1BLElBQUksR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLGVBQXZCLENBQWI7QUFFQSxJQUFNQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQVQsQ0FBMEIsaUJBQTFCLENBQXBCO0FBRUFILFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixFQUF3Q0csZ0JBQXhDLENBQXlELE9BQXpELEVBQWtFLFlBQU07RUFDcEVKLFFBQVEsQ0FBQ0ssSUFBVCxDQUFjQyxTQUFkLENBQXdCQyxHQUF4QixDQUE0QixNQUE1QjtFQUNBUixJQUFJLENBQUNPLFNBQUwsQ0FB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Z0JBQTFCLENBQW5CO0FBRUE2QyxVQUFVLENBQUN2QyxPQUFYLENBQW1CLFVBQUFPLElBQUksRUFBSTtFQUN2QkEsSUFBSSxDQUFDWixnQkFBTCxDQUFzQixPQUF0QixFQUErQixZQUFNO0lBQ2pDWSxJQUFJLENBQUN5QixhQUFMLENBQW1CbkMsU0FBbkIsQ0FBNkJ5QixRQUE3QixDQUFzQyxTQUF0QyxJQUFtRGdCLGtCQUFrQixDQUFDL0IsSUFBRCxDQUFyRSxHQUE4RXVCLGVBQWUsQ0FBQ3ZCLElBQUQsQ0FBN0Y7SUFDQWdDLFVBQVUsQ0FBQ3ZDLE9BQVgsQ0FBbUIsVUFBQWdCLEVBQUUsRUFBSTtNQUNyQixJQUFJQSxFQUFFLENBQUNnQixhQUFILEtBQXFCekIsSUFBSSxDQUFDeUIsYUFBOUIsRUFBNkNNLGtCQUFrQixDQUFDdEIsRUFBRCxDQUFsQjtJQUNoRCxDQUZEO0VBR0gsQ0FMRDtBQU1ILENBUEQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINCR0YPRgNCz0LXRgCDQvNC10L3RjlxuXG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21lbnVcIilcblxuY29uc3QgbGlua3NIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLWhlYWRlci1saW5rXCIpXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLS1vcGVuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIilcbn0pXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlci0tY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIik7XG59KVxuXG5saW5rc0hlYWRlci5mb3JFYWNoKGxpbmsgPT4ge1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAwMCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbi8vINCa0LDRgtCw0LvQvtCzINGB0LLQsNC50L/QtdGAXG5cbmNvbnN0IGNhdGFsb2dNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19tYWluXCIpXG5cbmNvbnN0IGNhdGFsb2dTd2lwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX3N3aXBlclwiKVxuXG5mdW5jdGlvbiBhZGRTd2lwZXIoKSB7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNjQwKSB7XG4gICAgICAgIGNhdGFsb2dNYWluLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItd3JhcHBlclwiKVxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiY2F0YWxvZ19fbWFpblwiKVxuICAgICAgICB9KVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX2NhcmRcIikuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcInN3aXBlci1zbGlkZVwiKVxuICAgICAgICB9KVxuICAgICAgICBjYXRhbG9nU3dpcGVyLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXJcIilcbiAgICAgICAgICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoXCIuY2F0YWxvZ19fc3dpcGVyXCIsIHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYXRhbG9nTWFpbi5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwic3dpcGVyLXdyYXBwZXJcIilcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImNhdGFsb2dfX21haW5cIilcbiAgICAgICAgfSlcbiAgICAgICAgY2F0YWxvZ1N3aXBlci5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwic3dpcGVyXCIpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5hZGRTd2lwZXIoKVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgIGFkZFN3aXBlcigpXG59KVxuXG4vLyDQmtCw0YLQsNC70L7QsyDRgdC+0YDRgtC40YDQvtCy0LrQsFxuXG5jb25zdCBidG5TZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhdGFsb2dfX3NvcnQtc2VsZWN0LWhlYWRcIilcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2F0YWxvZ19fc29ydC1zZWxlY3RcIilcbmJ0blNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzZWxlY3QuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJylcbn0pXG5cbmNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX3NvcnQtc2VsZWN0LWJvZHktaXRlbVwiKVxubGlzdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxpc3QuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKSlcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG4gICAgICAgIGJ0blNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fc29ydC1zZWxlY3QtaGVhZC10ZXh0JykudGV4dENvbnRlbnQgPSBlbGVtLnRleHRDb250ZW50XG4gICAgICAgIGFjdGl2ZUNhdGFsb2coKVxuICAgIH0pXG59KVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKCFlLmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHNlbGVjdCkpIHtcbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpXG4gICAgfVxufSlcblxuZnVuY3Rpb24gYWN0aXZlQ2F0YWxvZygpIHtcbiAgICBsaXN0LmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgIGlmKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBlbGVtLmRhdGFzZXQuc29ydFxuICAgICAgICAgICAgY29uc29sZS5sb2coaWQpXG4gICAgICAgICAgICBjb25zdCBtYWluQ2F0YWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nX19zd2lwZXInKVxuICAgICAgICAgICAgbWFpbkNhdGFsb2cuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gZWwuZGF0YXNldC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuYWN0aXZlQ2F0YWxvZygpXG5cbi8vINCf0YDQuNC10LzRg9GJ0LXRgdGC0LLQsCDRgtGD0LvRgtC40L9cbi8vXG4vLyBjb25zdCBhZHZhbnRnZXNJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWR2YW50YWdlX19pdGVtXCIpO1xuLy8gY29uc3QgYWR2YW50Z2VzSXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkdmFudGFnZV9faW1nLWJveFwiKVxuLy9cbi8vIGFkdmFudGdlc0l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4vLyAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuLy8gICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuLy8gICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd1wiKVxuLy8gICAgICAgICB9KVxuLy8gICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuLy8gICAgICAgICAgICAgaWYgKGVsZW0uZGF0YXNldC5pbWcgPT09IGl0ZW0uZGF0YXNldC5wYXRoaW1nKSB7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZWxlbSlcbi8vICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJpcy1zaG93XCIpXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pXG4vLyAgICAgfSlcbi8vXG4vLyAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuLy8gICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuLy8gICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd1wiKVxuLy8gICAgICAgICB9KVxuLy8gICAgIH0pXG4vL1xuLy8gfSlcbi8vINCU0LjQu9C10YDRiyDQsNC60LrQsNGA0LTQuNC+0L1cbmZ1bmN0aW9uIGFjdGl2ZUFjY2FyZGlvbihpdGVtKSB7XG4gICAgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpcy1zaG93XCIpO1xuICAgIGxldCBwYW5lbCA9IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghcGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XG4gICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IHBhbmVsLnNjcm9sbEhlaWdodCArIFwicHhcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEFjdGl2ZUFjY2FyZGlvbihpdGVtKSB7XG4gICAgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93XCIpO1xuICAgIGxldCBwYW5lbCA9IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwYW5lbC5zdHlsZS5tYXhIZWlnaHQpIHtcbiAgICAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbFxuICAgIH1cbn1cblxuY29uc3QgYWNjYXJkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWFsZXJzX19oZWFkJylcblxuYWNjYXJkaW9ucy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1zaG93XCIpID8gbm90QWN0aXZlQWNjYXJkaW9uKGVsZW0pIDogYWN0aXZlQWNjYXJkaW9uKGVsZW0pXG4gICAgICAgIGFjY2FyZGlvbnMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwucGFyZW50RWxlbWVudCAhPT0gZWxlbS5wYXJlbnRFbGVtZW50KSBub3RBY3RpdmVBY2NhcmRpb24oZWwpXG4gICAgICAgIH0pXG4gICAgfSlcbn0pIl19
