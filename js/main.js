"use strict";

AOS.init(); // Бургер меню

var menu = document.querySelector(".header__menu");
var linksHeader = document.querySelectorAll(".js-header-link");
document.querySelector(".burger--open").addEventListener("click", function () {
  document.body.classList.add("lock");
  menu.classList.add("is-active");
});
document.querySelector(".burger--close").addEventListener('click', function () {
  document.body.classList.remove("lock");
  menu.classList.remove("is-active");
});
linksHeader.forEach(function (link) {
  link.addEventListener("click", function () {
    if (window.innerWidth < 1000) {
      document.body.classList.remove("lock");
      menu.classList.remove("is-active");
    }
  });
}); // Каталог свайпер

var catalogMain = document.querySelectorAll(".catalog__main");
var catalogSwiper = document.querySelectorAll(".catalog__swiper");

function addSwiper() {
  if (window.innerWidth < 640) {
    catalogMain.forEach(function (elem) {
      elem.classList.add("swiper-wrapper");
      elem.classList.remove("catalog__main");
    });
    document.querySelectorAll(".catalog__card").forEach(function (elem) {
      elem.classList.add("swiper-slide");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.add("swiper");
      var swiper = new Swiper(".catalog__swiper", {
        slidesPerView: "auto",
        spaceBetween: 10
      });
    });
  } else {
    catalogMain.forEach(function (elem) {
      elem.classList.remove("swiper-wrapper");
      elem.classList.add("catalog__main");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.remove("swiper");
    });
  }
}

addSwiper();
window.addEventListener('resize', function () {
  addSwiper();
}); // Каталог сортировка

var btnSelect = document.querySelector(".catalog__sort-select-head");
var select = document.querySelector(".catalog__sort-select");
btnSelect.addEventListener('click', function () {
  select.classList.toggle('is-active');
});
var list = document.querySelectorAll(".catalog__sort-select-body-item");
list.forEach(function (elem) {
  elem.addEventListener('click', function () {
    list.forEach(function (el) {
      return el.classList.remove('is-active');
    });
    elem.classList.add('is-active');
    select.classList.remove('is-active');
    btnSelect.querySelector('.catalog__sort-select-head-text').textContent = elem.textContent;
    activeCatalog();
  });
});

function activeCatalog() {
  list.forEach(function (elem) {
    if (elem.classList.contains('is-active')) {
      var id = elem.dataset.sort;
      console.log(id);
      var mainCatalog = document.querySelectorAll('.catalog__swiper');
      mainCatalog.forEach(function (el) {
        el.classList.remove("is-active");

        if (id === el.dataset.path) {
          el.classList.add("is-active");
        }
      });
    }
  });
}

activeCatalog(); // Приемущества тултип

var advantgesItems = document.querySelectorAll(".advantage__item");
var advantgesItemsBox = document.querySelectorAll(".advantage__img-box");
advantgesItems.forEach(function (item) {
  item.addEventListener('mouseenter', function () {
    if (window.innerWidth > 999) {
      advantgesItems.forEach(function (elem) {
        elem.classList.add("is-show");
      });
      item.classList.remove("is-show");
    }
  });
  item.addEventListener('mouseleave', function () {
    if (window.innerWidth > 999) {
      advantgesItems.forEach(function (elem) {
        elem.classList.remove("is-show");
      });
    }
  });
  item.addEventListener("mousedown", function () {
    if (window.innerWidth < 1000) {
      advantgesItemsBox.forEach(function (elem) {
        elem.classList.remove("is-show");
      });
      advantgesItemsBox.forEach(function (elem) {
        if (elem.dataset.img === item.dataset.pathimg) {
          console.log(elem);
          elem.classList.add("is-show");
        }
      });
    }
  });
  item.addEventListener('mouseup', function () {
    advantgesItemsBox.forEach(function (elem) {
      elem.classList.remove("is-show");
    });
  });
}); // Дилеры аккардион

function activeAccardion(item) {
  item.parentElement.classList.add("is-show");
  var panel = item.nextElementSibling;

  if (!panel.style.maxHeight) {
    panel.style.maxHeight = panel.scrollHeight + "px";
  }
}

function notActiveAccardion(item) {
  item.parentElement.classList.remove("is-show");
  var panel = item.nextElementSibling;

  if (panel.style.maxHeight) {
    panel.style.maxHeight = null;
  }
}

var accardions = document.querySelectorAll('.dealers__head');
accardions.forEach(function (elem) {
  elem.addEventListener('click', function () {
    elem.parentElement.classList.contains("is-show") ? notActiveAccardion(elem) : activeAccardion(elem);
    accardions.forEach(function (el) {
      if (el.parentElement !== elem.parentElement) notActiveAccardion(el);
    });
  });
}); // Выпадащка форма обратной связи

var btnTarget = document.querySelector('.feedback__sort-btn');
btnTarget.addEventListener("click", function () {
  btnTarget.parentElement.classList.contains("is-show") ? notActiveAccardion(btnTarget) : activeAccardion(btnTarget);
});
var listTarget = document.querySelectorAll('.feedback__sort-item');
listTarget.forEach(function (elem) {
  elem.addEventListener("click", function () {
    btnTarget.firstElementChild.textContent = elem.textContent;
    btnTarget.firstElementChild.classList.add("is-active");
    notActiveAccardion(btnTarget);
  });
});
document.addEventListener('click', function (e) {
  if (!select.contains(e.target) && !btnTarget.parentElement.contains(e.target)) {
    select.classList.remove('is-active');
    notActiveAccardion(btnTarget);
  }
});
window.addEventListener('load', function () {
  AOS.init();
});
window.addEventListener('scroll', function () {
  AOS.init();
});
window.addEventListener('resize', function () {
  AOS.refresh();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQU9TIiwiaW5pdCIsIm1lbnUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJsaW5rc0hlYWRlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImZvckVhY2giLCJsaW5rIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImNhdGFsb2dNYWluIiwiY2F0YWxvZ1N3aXBlciIsImFkZFN3aXBlciIsImVsZW0iLCJzd2lwZXIiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwiYnRuU2VsZWN0Iiwic2VsZWN0IiwidG9nZ2xlIiwibGlzdCIsImVsIiwidGV4dENvbnRlbnQiLCJhY3RpdmVDYXRhbG9nIiwiY29udGFpbnMiLCJpZCIsImRhdGFzZXQiLCJzb3J0IiwiY29uc29sZSIsImxvZyIsIm1haW5DYXRhbG9nIiwicGF0aCIsImFkdmFudGdlc0l0ZW1zIiwiYWR2YW50Z2VzSXRlbXNCb3giLCJpdGVtIiwiaW1nIiwicGF0aGltZyIsImFjdGl2ZUFjY2FyZGlvbiIsInBhcmVudEVsZW1lbnQiLCJwYW5lbCIsIm5leHRFbGVtZW50U2libGluZyIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0Iiwibm90QWN0aXZlQWNjYXJkaW9uIiwiYWNjYXJkaW9ucyIsImJ0blRhcmdldCIsImxpc3RUYXJnZXQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImUiLCJ0YXJnZXQiLCJyZWZyZXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxHQUFHLENBQUNDLElBQUosRyxDQUVBOztBQUVBLElBQU1DLElBQUksR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLGVBQXZCLENBQWI7QUFFQSxJQUFNQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQVQsQ0FBMEIsaUJBQTFCLENBQXBCO0FBRUFILFFBQVEsQ0FBQ0MsYUFBVCxDQUF1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QVgsQ0FBbUIsVUFBQU8sSUFBSSxFQUFJO0VBQ3ZCQSxJQUFJLENBQUNaLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFlBQU07SUFDakM4QyxTQUFTLENBQUNFLGlCQUFWLENBQTRCMUIsV0FBNUIsR0FBMENWLElBQUksQ0FBQ1UsV0FBL0M7SUFDQXdCLFNBQVMsQ0FBQ0UsaUJBQVYsQ0FBNEI5QyxTQUE1QixDQUFzQ0MsR0FBdEMsQ0FBMEMsV0FBMUM7SUFDQXlDLGtCQUFrQixDQUFDRSxTQUFELENBQWxCO0VBQ0gsQ0FKRDtBQUtILENBTkQ7QUFTQWxELFFBQVEsQ0FBQ0ksZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsVUFBQ2lELENBQUQsRUFBTztFQUN0QyxJQUFJLENBQUMvQixNQUFNLENBQUNNLFFBQVAsQ0FBZ0J5QixDQUFDLENBQUNDLE1BQWxCLENBQUQsSUFBOEIsQ0FBQ0osU0FBUyxDQUFDUixhQUFWLENBQXdCZCxRQUF4QixDQUFpQ3lCLENBQUMsQ0FBQ0MsTUFBbkMsQ0FBbkMsRUFBK0U7SUFDM0VoQyxNQUFNLENBQUNoQixTQUFQLENBQWlCRSxNQUFqQixDQUF3QixXQUF4QjtJQUNBd0Msa0JBQWtCLENBQUNFLFNBQUQsQ0FBbEI7RUFDSDtBQUNKLENBTEQ7QUFPQXZDLE1BQU0sQ0FBQ1AsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsWUFBVztFQUN2Q1AsR0FBRyxDQUFDQyxJQUFKO0FBQ0gsQ0FGRDtBQUlBYSxNQUFNLENBQUNQLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDLFlBQVc7RUFDekNQLEdBQUcsQ0FBQ0MsSUFBSjtBQUNILENBRkQ7QUFJQWEsTUFBTSxDQUFDUCxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFXO0VBQ3pDUCxHQUFHLENBQUMwRCxPQUFKO0FBQ0gsQ0FGRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiQU9TLmluaXQoKTtcblxuLy8g0JHRg9GA0LPQtdGAINC80LXQvdGOXG5cbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbWVudVwiKVxuXG5jb25zdCBsaW5rc0hlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtaGVhZGVyLWxpbmtcIilcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItLW9wZW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJsb2NrXCIpO1xuICAgIG1lbnUuY2xhc3NMaXN0LmFkZChcImlzLWFjdGl2ZVwiKVxufSlcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLS1jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2NrXCIpO1xuICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKTtcbn0pXG5cbmxpbmtzSGVhZGVyLmZvckVhY2gobGluayA9PiB7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMDAwKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2NrXCIpO1xuICAgICAgICAgICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtYWN0aXZlXCIpXG4gICAgICAgIH1cbiAgICB9KVxufSlcblxuLy8g0JrQsNGC0LDQu9C+0LMg0YHQstCw0LnQv9C10YBcblxuY29uc3QgY2F0YWxvZ01haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX21haW5cIilcblxuY29uc3QgY2F0YWxvZ1N3aXBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fc3dpcGVyXCIpXG5cbmZ1bmN0aW9uIGFkZFN3aXBlcigpIHtcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA2NDApIHtcbiAgICAgICAgY2F0YWxvZ01haW4uZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcInN3aXBlci13cmFwcGVyXCIpXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXRhbG9nX19tYWluXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fY2FyZFwiKS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXNsaWRlXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGNhdGFsb2dTd2lwZXIuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcInN3aXBlclwiKVxuICAgICAgICAgICAgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcihcIi5jYXRhbG9nX19zd2lwZXJcIiwge1xuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNhdGFsb2dNYWluLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJzd2lwZXItd3JhcHBlclwiKVxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiY2F0YWxvZ19fbWFpblwiKVxuICAgICAgICB9KVxuICAgICAgICBjYXRhbG9nU3dpcGVyLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJzd2lwZXJcIilcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmFkZFN3aXBlcigpXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgYWRkU3dpcGVyKClcbn0pXG5cbi8vINCa0LDRgtCw0LvQvtCzINGB0L7RgNGC0LjRgNC+0LLQutCwXG5cbmNvbnN0IGJ0blNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2F0YWxvZ19fc29ydC1zZWxlY3QtaGVhZFwiKVxuY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXRhbG9nX19zb3J0LXNlbGVjdFwiKVxuYnRuU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHNlbGVjdC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKVxufSlcblxuY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fc29ydC1zZWxlY3QtYm9keS1pdGVtXCIpXG5saXN0LmZvckVhY2goZWxlbSA9PiB7XG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGlzdC5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpKVxuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgYnRuU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jYXRhbG9nX19zb3J0LXNlbGVjdC1oZWFkLXRleHQnKS50ZXh0Q29udGVudCA9IGVsZW0udGV4dENvbnRlbnRcbiAgICAgICAgYWN0aXZlQ2F0YWxvZygpXG4gICAgfSlcbn0pXG5cbmZ1bmN0aW9uIGFjdGl2ZUNhdGFsb2coKSB7XG4gICAgbGlzdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICBpZihlbGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZWxlbS5kYXRhc2V0LnNvcnRcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkKVxuICAgICAgICAgICAgY29uc3QgbWFpbkNhdGFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19fc3dpcGVyJylcbiAgICAgICAgICAgIG1haW5DYXRhbG9nLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIilcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT09IGVsLmRhdGFzZXQucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmFjdGl2ZUNhdGFsb2coKVxuXG4vLyDQn9GA0LjQtdC80YPRidC10YHRgtCy0LAg0YLRg9C70YLQuNC/XG5cbmNvbnN0IGFkdmFudGdlc0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hZHZhbnRhZ2VfX2l0ZW1cIik7XG5jb25zdCBhZHZhbnRnZXNJdGVtc0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWR2YW50YWdlX19pbWctYm94XCIpXG5cblxuYWR2YW50Z2VzSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5OSkge1xuICAgICAgICAgICAgYWR2YW50Z2VzSXRlbXMuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJpcy1zaG93XCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd1wiKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gOTk5KSB7XG4gICAgICAgICAgICBhZHZhbnRnZXNJdGVtcy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLXNob3dcIilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMDAwKSB7XG4gICAgICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLXNob3dcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtLmRhdGFzZXQuaW1nID09PSBpdGVtLmRhdGFzZXQucGF0aGltZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtKVxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJpcy1zaG93XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7XG4gICAgICAgIGFkdmFudGdlc0l0ZW1zQm94LmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93XCIpXG4gICAgICAgIH0pXG4gICAgfSlcblxufSlcblxuLy8g0JTQuNC70LXRgNGLINCw0LrQutCw0YDQtNC40L7QvVxuZnVuY3Rpb24gYWN0aXZlQWNjYXJkaW9uKGl0ZW0pIHtcbiAgICBpdGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlzLXNob3dcIik7XG4gICAgbGV0IHBhbmVsID0gaXRlbS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKCFwYW5lbC5zdHlsZS5tYXhIZWlnaHQpIHtcbiAgICAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gcGFuZWwuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbm90QWN0aXZlQWNjYXJkaW9uKGl0ZW0pIHtcbiAgICBpdGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImlzLXNob3dcIik7XG4gICAgbGV0IHBhbmVsID0gaXRlbS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKHBhbmVsLnN0eWxlLm1heEhlaWdodCkge1xuICAgICAgICBwYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBudWxsXG4gICAgfVxufVxuXG5jb25zdCBhY2NhcmRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlYWxlcnNfX2hlYWQnKVxuXG5hY2NhcmRpb25zLmZvckVhY2goZWxlbSA9PiB7XG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZWxlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImlzLXNob3dcIikgPyBub3RBY3RpdmVBY2NhcmRpb24oZWxlbSkgOiBhY3RpdmVBY2NhcmRpb24oZWxlbSlcbiAgICAgICAgYWNjYXJkaW9ucy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGlmIChlbC5wYXJlbnRFbGVtZW50ICE9PSBlbGVtLnBhcmVudEVsZW1lbnQpIG5vdEFjdGl2ZUFjY2FyZGlvbihlbClcbiAgICAgICAgfSlcbiAgICB9KVxufSlcblxuLy8g0JLRi9C/0LDQtNCw0YnQutCwINGE0L7RgNC80LAg0L7QsdGA0LDRgtC90L7QuSDRgdCy0Y/Qt9C4XG5cbmNvbnN0IGJ0blRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFja19fc29ydC1idG4nKVxuYnRuVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgYnRuVGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtc2hvd1wiKSA/IG5vdEFjdGl2ZUFjY2FyZGlvbihidG5UYXJnZXQpIDogYWN0aXZlQWNjYXJkaW9uKGJ0blRhcmdldClcbn0pXG5cbmNvbnN0IGxpc3RUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVlZGJhY2tfX3NvcnQtaXRlbScpXG5cbmxpc3RUYXJnZXQuZm9yRWFjaChlbGVtID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGJ0blRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IGVsZW0udGV4dENvbnRlbnRcbiAgICAgICAgYnRuVGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIilcbiAgICAgICAgbm90QWN0aXZlQWNjYXJkaW9uKGJ0blRhcmdldClcbiAgICB9KVxufSlcblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKCFzZWxlY3QuY29udGFpbnMoZS50YXJnZXQpICYmICFidG5UYXJnZXQucGFyZW50RWxlbWVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpXG4gICAgICAgIG5vdEFjdGl2ZUFjY2FyZGlvbihidG5UYXJnZXQpXG4gICAgfVxufSlcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICBBT1MuaW5pdCgpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcbiAgICBBT1MuaW5pdCgpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICBBT1MucmVmcmVzaCgpO1xufSk7Il19
