"use strict";

var menu = document.querySelector(".header__menu");
document.querySelector(".burger--open").addEventListener("click", function () {
  document.body.classList.add("lock");
  menu.classList.add("is-active");
});
document.querySelector(".burger--close").addEventListener('click', function () {
  document.body.classList.remove("lock");
  menu.classList.remove("is-active");
});
var catalogMain = document.querySelectorAll(".catalog__main");
var catalogSwiper = document.querySelectorAll(".catalog__swiper");

function addSwiper() {
  if (window.innerWidth < 640) {
    catalogMain.forEach(function (elem) {
      elem.classList.add("swiper-wrapper");
      elem.classList.remove("catalog__main");
    });
    document.querySelectorAll(".catalog__card").forEach(function (elem) {
      elem.classList.add("swiper-slide");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.add("swiper");
      var swiper = new Swiper(".catalog__swiper", {
        slidesPerView: "auto",
        spaceBetween: 10
      });
    });
  } else {
    catalogMain.forEach(function (elem) {
      elem.classList.remove("swiper-wrapper");
      elem.classList.add("catalog__main");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.remove("swiper");
    });
  }
}

addSwiper();
window.addEventListener('resize', function () {
  addSwiper();
});
var btnSelect = document.querySelector(".catalog__sort-select-head");
var select = document.querySelector(".catalog__sort-select");
btnSelect.addEventListener('click', function () {
  select.classList.toggle('is-active');
});
var list = document.querySelectorAll(".catalog__sort-select-body-item");
list.forEach(function (elem) {
  elem.addEventListener('click', function () {
    list.forEach(function (el) {
      return el.classList.remove('is-active');
    });
    elem.classList.add('is-active');
    select.classList.remove('is-active');
    btnSelect.querySelector('.catalog__sort-select-head-text').textContent = elem.textContent;
    activeCatalog();
  });
});
document.addEventListener('click', function (e) {
  if (!e.composedPath().includes(select)) {
    select.classList.remove('is-active');
  }
});

function activeCatalog() {
  list.forEach(function (elem) {
    if (elem.classList.contains('is-active')) {
      var id = elem.dataset.sort;
      console.log(id);
      var mainCatalog = document.querySelectorAll('.catalog__swiper');
      mainCatalog.forEach(function (el) {
        el.classList.remove("is-active");

        if (id === el.dataset.path) {
          el.classList.add("is-active");
        }
      });
    }
  });
}

activeCatalog();

function activeAccardion(item) {
  item.parentElement.classList.add("is-show");
  var panel = item.nextElementSibling;

  if (!panel.style.maxHeight) {
    panel.style.maxHeight = panel.scrollHeight + "px";
  }
}

function notActiveAccardion(item) {
  item.parentElement.classList.remove("is-show");
  var panel = item.nextElementSibling;

  if (panel.style.maxHeight) {
    panel.style.maxHeight = null;
  }
}

var accardions = document.querySelectorAll('.dealers__head');
accardions.forEach(function (elem) {
  elem.addEventListener('click', function () {
    elem.parentElement.classList.contains("is-show") ? notActiveAccardion(elem) : activeAccardion(elem);
    accardions.forEach(function (el) {
      if (el.parentElement !== elem.parentElement) notActiveAccardion(el);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY2F0YWxvZ01haW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2F0YWxvZ1N3aXBlciIsImFkZFN3aXBlciIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJmb3JFYWNoIiwiZWxlbSIsInN3aXBlciIsIlN3aXBlciIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJidG5TZWxlY3QiLCJzZWxlY3QiLCJ0b2dnbGUiLCJsaXN0IiwiZWwiLCJ0ZXh0Q29udGVudCIsImFjdGl2ZUNhdGFsb2ciLCJlIiwiY29tcG9zZWRQYXRoIiwiaW5jbHVkZXMiLCJjb250YWlucyIsImlkIiwiZGF0YXNldCIsInNvcnQiLCJjb25zb2xlIiwibG9nIiwibWFpbkNhdGFsb2ciLCJwYXRoIiwiYWN0aXZlQWNjYXJkaW9uIiwiaXRlbSIsInBhcmVudEVsZW1lbnQiLCJwYW5lbCIsIm5leHRFbGVtZW50U2libGluZyIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0Iiwibm90QWN0aXZlQWNjYXJkaW9uIiwiYWNjYXJkaW9ucyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxJQUFJLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixDQUFiO0FBRUFELFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixFQUF3Q0MsZ0JBQXhDLENBQXlELE9BQXpELEVBQWtFLFlBQU07RUFDcEVGLFFBQVEsQ0FBQ0csSUFBVCxDQUFjQyxTQUFkLENBQXdCQyxHQUF4QixDQUE0QixNQUE1QjtFQUNBTixJQUFJLENBQUNLLFNBQUwsQ0FBZUMsR0FBZixDQUFtQixXQUFuQjtBQUNILENBSEQ7QUFJQUwsUUFBUSxDQUFDQyxhQUFULENBQXVCLGdCQUF2QixFQUF5Q0MsZ0JBQXpDLENBQTBE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SyxDQUFDRSxLQUFOLENBQVlDLFNBQWpCLEVBQTRCO0lBQ3hCSCxLQUFLLENBQUNFLEtBQU4sQ0FBWUMsU0FBWixHQUF3QkgsS0FBSyxDQUFDSSxZQUFOLEdBQXFCLElBQTdDO0VBQ0g7QUFDSjs7QUFFRCxTQUFTQyxrQkFBVCxDQUE0QlAsSUFBNUIsRUFBa0M7RUFDOUJBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQm5DLFNBQW5CLENBQTZCRSxNQUE3QixDQUFvQyxTQUFwQztFQUNBLElBQUlrQyxLQUFLLEdBQUdGLElBQUksQ0FBQ0csa0JBQWpCOztFQUNBLElBQUlELEtBQUssQ0FBQ0UsS0FBTixDQUFZQyxTQUFoQixFQUEyQjtJQUN2QkgsS0FBSyxDQUFDRSxLQUFOLENBQVlDLFNBQVosR0FBd0IsSUFBeEI7RUFDSDtBQUNKOztBQUVELElBQU1HLFVBQVUsR0FBRzlDLFFBQVEsQ0FBQ1EsZ0JBQVQsQ0FBMEIsZ0JBQTFCLENBQW5CO0FBRUFzQyxVQUFVLENBQUNqQyxPQUFYLENBQW1CLFVBQUFDLElBQUksRUFBSTtFQUN2QkEsSUFBSSxDQUFDWixnQkFBTCxDQUFzQixPQUF0QixFQUErQixZQUFNO0lBQ2pDWSxJQUFJLENBQUN5QixhQUFMLENBQW1CbkMsU0FBbkIsQ0FBNkJ5QixRQUE3QixDQUFzQyxTQUF0QyxJQUFtRGdCLGtCQUFrQixDQUFDL0IsSUFBRCxDQUFyRSxHQUE4RXVCLGVBQWUsQ0FBQ3ZCLElBQUQsQ0FBN0Y7SUFDQWdDLFVBQVUsQ0FBQ2pDLE9BQVgsQ0FBbUIsVUFBQVUsRUFBRSxFQUFJO01BQ3JCLElBQUlBLEVBQUUsQ0FBQ2dCLGFBQUgsS0FBcUJ6QixJQUFJLENBQUN5QixhQUE5QixFQUE2Q00sa0JBQWtCLENBQUN0QixFQUFELENBQWxCO0lBQ2hELENBRkQ7RUFHSCxDQUxEO0FBTUgsQ0FQRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19tZW51XCIpXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLS1vcGVuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIilcbn0pXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlci0tY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIik7XG59KVxuXG5jb25zdCBjYXRhbG9nTWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2F0YWxvZ19fbWFpblwiKVxuXG5jb25zdCBjYXRhbG9nU3dpcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19zd2lwZXJcIilcblxuZnVuY3Rpb24gYWRkU3dpcGVyKCkge1xuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDY0MCkge1xuICAgICAgICBjYXRhbG9nTWFpbi5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwic3dpcGVyLXdyYXBwZXJcIilcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImNhdGFsb2dfX21haW5cIilcbiAgICAgICAgfSlcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19jYXJkXCIpLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItc2xpZGVcIilcbiAgICAgICAgfSlcbiAgICAgICAgY2F0YWxvZ1N3aXBlci5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwic3dpcGVyXCIpXG4gICAgICAgICAgICBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKFwiLmNhdGFsb2dfX3N3aXBlclwiLCB7XG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2F0YWxvZ01haW4uZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcInN3aXBlci13cmFwcGVyXCIpXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJjYXRhbG9nX19tYWluXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGNhdGFsb2dTd2lwZXIuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcInN3aXBlclwiKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuYWRkU3dpcGVyKClcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBhZGRTd2lwZXIoKVxufSlcblxuY29uc3QgYnRuU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXRhbG9nX19zb3J0LXNlbGVjdC1oZWFkXCIpXG5jb25zdCBzZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhdGFsb2dfX3NvcnQtc2VsZWN0XCIpXG5idG5TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgc2VsZWN0LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpXG59KVxuXG5jb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19zb3J0LXNlbGVjdC1ib2R5LWl0ZW1cIilcbmxpc3QuZm9yRWFjaChlbGVtID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsaXN0LmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJykpXG4gICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJylcbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuICAgICAgICBidG5TZWxlY3QucXVlcnlTZWxlY3RvcignLmNhdGFsb2dfX3NvcnQtc2VsZWN0LWhlYWQtdGV4dCcpLnRleHRDb250ZW50ID0gZWxlbS50ZXh0Q29udGVudFxuICAgICAgICBhY3RpdmVDYXRhbG9nKClcbiAgICB9KVxufSlcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmICghZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhzZWxlY3QpKSB7XG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKVxuICAgIH1cbn0pXG5cbmZ1bmN0aW9uIGFjdGl2ZUNhdGFsb2coKSB7XG4gICAgbGlzdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICBpZihlbGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZWxlbS5kYXRhc2V0LnNvcnRcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkKVxuICAgICAgICAgICAgY29uc3QgbWFpbkNhdGFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0YWxvZ19fc3dpcGVyJylcbiAgICAgICAgICAgIG1haW5DYXRhbG9nLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIilcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT09IGVsLmRhdGFzZXQucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwiaXMtYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmFjdGl2ZUNhdGFsb2coKVxuXG5mdW5jdGlvbiBhY3RpdmVBY2NhcmRpb24oaXRlbSkge1xuICAgIGl0ZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaXMtc2hvd1wiKTtcbiAgICBsZXQgcGFuZWwgPSBpdGVtLm5leHRFbGVtZW50U2libGluZztcbiAgICBpZiAoIXBhbmVsLnN0eWxlLm1heEhlaWdodCkge1xuICAgICAgICBwYW5lbC5zdHlsZS5tYXhIZWlnaHQgPSBwYW5lbC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3RBY3RpdmVBY2NhcmRpb24oaXRlbSkge1xuICAgIGl0ZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd1wiKTtcbiAgICBsZXQgcGFuZWwgPSBpdGVtLm5leHRFbGVtZW50U2libGluZztcbiAgICBpZiAocGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XG4gICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IG51bGxcbiAgICB9XG59XG5cbmNvbnN0IGFjY2FyZGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVhbGVyc19faGVhZCcpXG5cbmFjY2FyZGlvbnMuZm9yRWFjaChlbGVtID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBlbGVtLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtc2hvd1wiKSA/IG5vdEFjdGl2ZUFjY2FyZGlvbihlbGVtKSA6IGFjdGl2ZUFjY2FyZGlvbihlbGVtKVxuICAgICAgICBhY2NhcmRpb25zLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgaWYgKGVsLnBhcmVudEVsZW1lbnQgIT09IGVsZW0ucGFyZW50RWxlbWVudCkgbm90QWN0aXZlQWNjYXJkaW9uKGVsKVxuICAgICAgICB9KVxuICAgIH0pXG59KSJdfQ==
