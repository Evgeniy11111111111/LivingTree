"use strict";

// Бургер меню
var menu = document.querySelector(".header__menu");
var linksHeader = document.querySelectorAll(".js-header-link");
document.querySelector(".burger--open").addEventListener("click", function () {
  document.body.classList.add("lock");
  menu.classList.add("is-active");
});
document.querySelector(".burger--close").addEventListener('click', function () {
  document.body.classList.remove("lock");
  menu.classList.remove("is-active");
});
linksHeader.forEach(function (link) {
  link.addEventListener("click", function () {
    if (window.innerWidth < 1000) {
      document.body.classList.remove("lock");
      menu.classList.remove("is-active");
    }
  });
}); // Каталог свайпер

var catalogMain = document.querySelectorAll(".catalog__main");
var catalogSwiper = document.querySelectorAll(".catalog__swiper");

function addSwiper() {
  if (window.innerWidth < 640) {
    catalogMain.forEach(function (elem) {
      elem.classList.add("swiper-wrapper");
      elem.classList.remove("catalog__main");
    });
    document.querySelectorAll(".catalog__card").forEach(function (elem) {
      elem.classList.add("swiper-slide");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.add("swiper");
      var swiper = new Swiper(".catalog__swiper", {
        slidesPerView: "auto",
        spaceBetween: 10
      });
    });
  } else {
    catalogMain.forEach(function (elem) {
      elem.classList.remove("swiper-wrapper");
      elem.classList.add("catalog__main");
    });
    catalogSwiper.forEach(function (elem) {
      elem.classList.remove("swiper");
    });
  }
}

addSwiper();
window.addEventListener('resize', function () {
  addSwiper();
}); // Каталог сортировка

var btnSelect = document.querySelector(".catalog__sort-select-head");
var select = document.querySelector(".catalog__sort-select");
btnSelect.addEventListener('click', function () {
  select.classList.toggle('is-active');
});
var list = document.querySelectorAll(".catalog__sort-select-body-item");
list.forEach(function (elem) {
  elem.addEventListener('click', function () {
    list.forEach(function (el) {
      return el.classList.remove('is-active');
    });
    elem.classList.add('is-active');
    select.classList.remove('is-active');
    btnSelect.querySelector('.catalog__sort-select-head-text').textContent = elem.textContent;
    activeCatalog();
  });
});

function activeCatalog() {
  list.forEach(function (elem) {
    if (elem.classList.contains('is-active')) {
      var id = elem.dataset.sort;
      console.log(id);
      var mainCatalog = document.querySelectorAll('.catalog__swiper');
      mainCatalog.forEach(function (el) {
        el.classList.remove("is-active");

        if (id === el.dataset.path) {
          el.classList.add("is-active");
        }
      });
    }
  });
}

activeCatalog(); // Приемущества тултип

var advantgesItems = document.querySelectorAll(".advantage__item");
var advantgesItemsBox = document.querySelectorAll(".advantage__img-box");
advantgesItems.forEach(function (item) {
  item.addEventListener('mouseenter', function () {
    if (window.innerWidth > 999) {
      advantgesItems.forEach(function (elem) {
        elem.classList.add("is-show");
      });
      item.classList.remove("is-show");
    }
  });
  item.addEventListener('mouseleave', function () {
    if (window.innerWidth > 999) {
      advantgesItems.forEach(function (elem) {
        elem.classList.remove("is-show");
      });
    }
  });
  item.addEventListener("mousedown", function () {
    if (window.innerWidth < 1000) {
      advantgesItemsBox.forEach(function (elem) {
        elem.classList.remove("is-show");
      });
      advantgesItemsBox.forEach(function (elem) {
        if (elem.dataset.img === item.dataset.pathimg) {
          console.log(elem);
          elem.classList.add("is-show");
        }
      });
    }
  });
  item.addEventListener('mouseup', function () {
    advantgesItemsBox.forEach(function (elem) {
      elem.classList.remove("is-show");
    });
  });
}); // Дилеры аккардион

function activeAccardion(item) {
  item.parentElement.classList.add("is-show");
  var panel = item.nextElementSibling;

  if (!panel.style.maxHeight) {
    panel.style.maxHeight = panel.scrollHeight + "px";
  }
}

function notActiveAccardion(item) {
  item.parentElement.classList.remove("is-show");
  var panel = item.nextElementSibling;

  if (panel.style.maxHeight) {
    panel.style.maxHeight = null;
  }
}

var accardions = document.querySelectorAll('.dealers__head');
accardions.forEach(function (elem) {
  elem.addEventListener('click', function () {
    elem.parentElement.classList.contains("is-show") ? notActiveAccardion(elem) : activeAccardion(elem);
    accardions.forEach(function (el) {
      if (el.parentElement !== elem.parentElement) notActiveAccardion(el);
    });
  });
}); // Выпадащка форма обратной связи

var btnTarget = document.querySelector('.feedback__sort-btn');
btnTarget.addEventListener("click", function () {
  btnTarget.parentElement.classList.contains("is-show") ? notActiveAccardion(btnTarget) : activeAccardion(btnTarget);
});
var listTarget = document.querySelectorAll('.feedback__sort-item');
listTarget.forEach(function (elem) {
  elem.addEventListener("click", function () {
    btnTarget.firstElementChild.textContent = elem.textContent;
    notActiveAccardion(btnTarget);
  });
});
document.addEventListener('click', function (e) {
  if (!select.contains(e.target) && !btnTarget.parentElement.contains(e.target)) {
    select.classList.remove('is-active');
    notActiveAccardion(btnTarget);
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImxpbmtzSGVhZGVyIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZm9yRWFjaCIsImxpbmsiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiY2F0YWxvZ01haW4iLCJjYXRhbG9nU3dpcGVyIiwiYWRkU3dpcGVyIiwiZWxlbSIsInN3aXBlciIsIlN3aXBlciIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJidG5TZWxlY3QiLCJzZWxlY3QiLCJ0b2dnbGUiLCJsaXN0IiwiZWwiLCJ0ZXh0Q29udGVudCIsImFjdGl2ZUNhdGFsb2ciLCJjb250YWlucyIsImlkIiwiZGF0YXNldCIsInNvcnQiLCJjb25zb2xlIiwibG9nIiwibWFpbkNhdGFsb2ciLCJwYXRoIiwiYWR2YW50Z2VzSXRlbXMiLCJhZHZhbnRnZXNJdGVtc0JveCIsIml0ZW0iLCJpbWciLCJwYXRoaW1nIiwiYWN0aXZlQWNjYXJkaW9uIiwicGFyZW50RWxlbWVudCIsInBhbmVsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic3R5bGUiLCJtYXhIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJub3RBY3RpdmVBY2NhcmRpb24iLCJhY2NhcmRpb25zIiwiYnRuVGFyZ2V0IiwibGlzdFRhcmdldCIsImZpcnN0RWxlbWVudENoaWxkIiwiZSIsInRhcmdldCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBLElBQU1BLElBQUksR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLGVBQXZCLENBQWI7QUFFQSxJQUFNQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csZ0JBQVQsQ0FBMEIsaUJBQTFCLENBQXBCO0FBRUFILFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixlQUF2QixFQUF3Q0csZ0JBQXhDLENBQXlELE9BQXpELEVBQWtFLFlBQU07RUFD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LENBQXNCLE9BQXRCLEVBQStCLFlBQU07SUFDakM4QyxTQUFTLENBQUNFLGlCQUFWLENBQTRCMUIsV0FBNUIsR0FBMENWLElBQUksQ0FBQ1UsV0FBL0M7SUFDQXNCLGtCQUFrQixDQUFDRSxTQUFELENBQWxCO0VBQ0gsQ0FIRDtBQUlILENBTEQ7QUFRQWxELFFBQVEsQ0FBQ0ksZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsVUFBQ2lELENBQUQsRUFBTztFQUN0QyxJQUFJLENBQUMvQixNQUFNLENBQUNNLFFBQVAsQ0FBZ0J5QixDQUFDLENBQUNDLE1BQWxCLENBQUQsSUFBOEIsQ0FBQ0osU0FBUyxDQUFDUixhQUFWLENBQXdCZCxRQUF4QixDQUFpQ3lCLENBQUMsQ0FBQ0MsTUFBbkMsQ0FBbkMsRUFBK0U7SUFDM0VoQyxNQUFNLENBQUNoQixTQUFQLENBQWlCRSxNQUFqQixDQUF3QixXQUF4QjtJQUNBd0Msa0JBQWtCLENBQUNFLFNBQUQsQ0FBbEI7RUFDSDtBQUNKLENBTEQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINCR0YPRgNCz0LXRgCDQvNC10L3RjlxuXG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21lbnVcIilcblxuY29uc3QgbGlua3NIZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLWhlYWRlci1saW5rXCIpXG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLS1vcGVuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5hZGQoXCJpcy1hY3RpdmVcIilcbn0pXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlci0tY2xvc2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1hY3RpdmVcIik7XG59KVxuXG5saW5rc0hlYWRlci5mb3JFYWNoKGxpbmsgPT4ge1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAwMCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKTtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZShcImlzLWFjdGl2ZVwiKVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbi8vINCa0LDRgtCw0LvQvtCzINGB0LLQsNC50L/QtdGAXG5cbmNvbnN0IGNhdGFsb2dNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXRhbG9nX19tYWluXCIpXG5cbmNvbnN0IGNhdGFsb2dTd2lwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX3N3aXBlclwiKVxuXG5mdW5jdGlvbiBhZGRTd2lwZXIoKSB7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgNjQwKSB7XG4gICAgICAgIGNhdGFsb2dNYWluLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXItd3JhcHBlclwiKVxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiY2F0YWxvZ19fbWFpblwiKVxuICAgICAgICB9KVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX2NhcmRcIikuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcInN3aXBlci1zbGlkZVwiKVxuICAgICAgICB9KVxuICAgICAgICBjYXRhbG9nU3dpcGVyLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJzd2lwZXJcIilcbiAgICAgICAgICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoXCIuY2F0YWxvZ19fc3dpcGVyXCIsIHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYXRhbG9nTWFpbi5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwic3dpcGVyLXdyYXBwZXJcIilcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImNhdGFsb2dfX21haW5cIilcbiAgICAgICAgfSlcbiAgICAgICAgY2F0YWxvZ1N3aXBlci5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwic3dpcGVyXCIpXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5hZGRTd2lwZXIoKVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgIGFkZFN3aXBlcigpXG59KVxuXG4vLyDQmtCw0YLQsNC70L7QsyDRgdC+0YDRgtC40YDQvtCy0LrQsFxuXG5jb25zdCBidG5TZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhdGFsb2dfX3NvcnQtc2VsZWN0LWhlYWRcIilcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2F0YWxvZ19fc29ydC1zZWxlY3RcIilcbmJ0blNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzZWxlY3QuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJylcbn0pXG5cbmNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGFsb2dfX3NvcnQtc2VsZWN0LWJvZHktaXRlbVwiKVxubGlzdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxpc3QuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKSlcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG4gICAgICAgIGJ0blNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY2F0YWxvZ19fc29ydC1zZWxlY3QtaGVhZC10ZXh0JykudGV4dENvbnRlbnQgPSBlbGVtLnRleHRDb250ZW50XG4gICAgICAgIGFjdGl2ZUNhdGFsb2coKVxuICAgIH0pXG59KVxuXG5mdW5jdGlvbiBhY3RpdmVDYXRhbG9nKCkge1xuICAgIGxpc3QuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgaWYoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGVsZW0uZGF0YXNldC5zb3J0XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpZClcbiAgICAgICAgICAgIGNvbnN0IG1haW5DYXRhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2dfX3N3aXBlcicpXG4gICAgICAgICAgICBtYWluQ2F0YWxvZy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSBlbC5kYXRhc2V0LnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImlzLWFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5hY3RpdmVDYXRhbG9nKClcblxuLy8g0J/RgNC40LXQvNGD0YnQtdGB0YLQstCwINGC0YPQu9GC0LjQv1xuXG5jb25zdCBhZHZhbnRnZXNJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWR2YW50YWdlX19pdGVtXCIpO1xuY29uc3QgYWR2YW50Z2VzSXRlbXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFkdmFudGFnZV9faW1nLWJveFwiKVxuXG5cbmFkdmFudGdlc0l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTkpIHtcbiAgICAgICAgICAgIGFkdmFudGdlc0l0ZW1zLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiaXMtc2hvd1wiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImlzLXNob3dcIilcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5OSkge1xuICAgICAgICAgICAgYWR2YW50Z2VzSXRlbXMuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93XCIpXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAwMCkge1xuICAgICAgICAgICAgYWR2YW50Z2VzSXRlbXNCb3guZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93XCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgYWR2YW50Z2VzSXRlbXNCb3guZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5kYXRhc2V0LmltZyA9PT0gaXRlbS5kYXRhc2V0LnBhdGhpbWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZWxlbSlcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiaXMtc2hvd1wiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4ge1xuICAgICAgICBhZHZhbnRnZXNJdGVtc0JveC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtc2hvd1wiKVxuICAgICAgICB9KVxuICAgIH0pXG5cbn0pXG5cbi8vINCU0LjQu9C10YDRiyDQsNC60LrQsNGA0LTQuNC+0L1cbmZ1bmN0aW9uIGFjdGl2ZUFjY2FyZGlvbihpdGVtKSB7XG4gICAgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpcy1zaG93XCIpO1xuICAgIGxldCBwYW5lbCA9IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghcGFuZWwuc3R5bGUubWF4SGVpZ2h0KSB7XG4gICAgICAgIHBhbmVsLnN0eWxlLm1heEhlaWdodCA9IHBhbmVsLnNjcm9sbEhlaWdodCArIFwicHhcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5vdEFjdGl2ZUFjY2FyZGlvbihpdGVtKSB7XG4gICAgaXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1zaG93XCIpO1xuICAgIGxldCBwYW5lbCA9IGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwYW5lbC5zdHlsZS5tYXhIZWlnaHQpIHtcbiAgICAgICAgcGFuZWwuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbFxuICAgIH1cbn1cblxuY29uc3QgYWNjYXJkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWFsZXJzX19oZWFkJylcblxuYWNjYXJkaW9ucy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1zaG93XCIpID8gbm90QWN0aXZlQWNjYXJkaW9uKGVsZW0pIDogYWN0aXZlQWNjYXJkaW9uKGVsZW0pXG4gICAgICAgIGFjY2FyZGlvbnMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwucGFyZW50RWxlbWVudCAhPT0gZWxlbS5wYXJlbnRFbGVtZW50KSBub3RBY3RpdmVBY2NhcmRpb24oZWwpXG4gICAgICAgIH0pXG4gICAgfSlcbn0pXG5cbi8vINCS0YvQv9Cw0LTQsNGJ0LrQsCDRhNC+0YDQvNCwINC+0LHRgNCw0YLQvdC+0Lkg0YHQstGP0LfQuFxuXG5jb25zdCBidG5UYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlZGJhY2tfX3NvcnQtYnRuJylcbmJ0blRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGJ0blRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImlzLXNob3dcIikgPyBub3RBY3RpdmVBY2NhcmRpb24oYnRuVGFyZ2V0KSA6IGFjdGl2ZUFjY2FyZGlvbihidG5UYXJnZXQpXG59KVxuXG5jb25zdCBsaXN0VGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlZWRiYWNrX19zb3J0LWl0ZW0nKVxuXG5saXN0VGFyZ2V0LmZvckVhY2goZWxlbSA9PiB7XG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBidG5UYXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSBlbGVtLnRleHRDb250ZW50XG4gICAgICAgIG5vdEFjdGl2ZUFjY2FyZGlvbihidG5UYXJnZXQpXG4gICAgfSlcbn0pXG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmICghc2VsZWN0LmNvbnRhaW5zKGUudGFyZ2V0KSAmJiAhYnRuVGFyZ2V0LnBhcmVudEVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKVxuICAgICAgICBub3RBY3RpdmVBY2NhcmRpb24oYnRuVGFyZ2V0KVxuICAgIH1cbn0pIl19
